# E2E multi-version test WORKSPACE
# Note: Multi-version support is primarily a bzlmod feature.
# This WORKSPACE file tests that the rules work in WORKSPACE mode with a single version.

workspace(name = "rules_coco_multi_version_test")

load("@bazel_tools//tools/build_defs/repo:local.bzl", "local_repository")

# Use local development version of rules_coco
local_repository(
    name = "rules_coco",
    path = "../..",
)

load("@rules_coco//coco:repositories.bzl", "coco_repositories")

# Register coco toolchain with stable version
# Note: To test multi-version in WORKSPACE mode, you would need to call
# coco_repositories multiple times with different versions, which is not
# the recommended approach. Use bzlmod mode for multi-version support.
coco_repositories(
    cc = True,
    version = "1.5.0",
)

# Load GoogleTest for C++ unit tests (if needed)
load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")

http_archive(
    name = "googletest",
    sha256 = "8906a9361f61553f1baf9a03063744c43eddb47bc60f9cca99e4b31afd54b85e",
    strip_prefix = "googletest-9156d4caac880b513264ecbe0aa4746a3fead3d7",
    urls = ["https://github.com/google/googletest/archive/9156d4caac880b513264ecbe0aa4746a3fead3d7.zip"],
)
